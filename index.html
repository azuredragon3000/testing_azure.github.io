<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdMob API Example 2</title>
</head>
<body>
    <h1 id="message">AdMob API Example</h1>
    <button onclick="toggleMessage()">Toggle Message</button>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        function start() {
            document.getElementById('message').innerText = 'Loading AdMob data...';
            // Initialize the JavaScript client library.
            gapi.client.init({
                'apiKey': 'AIzaSyDxvkW93By11leZq3ngoox-DMIuqTXN7Mw',
                'clientId': '989394478630-s5b910djjf197lf04a8h58s9e3eluf1m.apps.googleusercontent.com',
            }).then(function() {
                // Authentication successful
                var authInstance = gapi.auth2.getAuthInstance();
                if (authInstance.isSignedIn.get()) {
                    // User is already signed in, proceed with API request
                    makeApiRequest();
                } else {
                    // User is not signed in, prompt for authentication
                    authInstance.signIn().then(function() {
                        // Authentication successful, proceed with API request
                        makeApiRequest();
                    }).catch(function(error) {
                        // Error occurred during authentication
                        console.error('Authentication Error:', error);
                        document.getElementById('message').innerText = 'Failed to authenticate. ' + (error.error || 'Unknown error occurred.');
                    });
                }
            }).catch(function(error) {
                // Error occurred during initialization
                console.error('Initialization Error:', error);
                document.getElementById('message').innerText = 'Failed to initialize the client library. ' + (error.error || 'Unknown error occurred.');
            });
        }

        function toggleMessage() {
            document.getElementById('message').innerText = 'Loading AdMob data...';
            // Load the JavaScript client library
            gapi.load('client', start);
        }

        function makeApiRequest() {
            // Make API request to AdMob API
            // Replace this with your actual API request logic
            document.getElementById('message').innerText = 'Making API request...';
            gapi.client.admob.accounts.list({}).then(function(response) {
                console.log(response.result);
                document.getElementById('message').innerText = 'AdMob data loaded successfully.';
            }).catch(function(error) {
                console.error('API Request Error:', error);
                var errorMessage = error.message || 'Unknown error occurred.';
                document.getElementById('message').innerText = 'Failed to load AdMob data. ' + errorMessage;
            });
        }
    </script>
</body>
</html>
